<!DOCTYPE html>
<html>
  <head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <LINK REL=StyleSheet HREF="main.css" TYPE="text/css" MEDIA=screen>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>



<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Twittler Home</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li>
        <li><a href="#">Link</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href=# id=liveViewToggle>Switch to Live Feed</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

    <div class="col-md-12 text-center"> 
      <button id="seeAll" class="btn btn-primary">See New</button> 
    </div>


    <div id="tweetlbox"></div>

    <script>

      $(document).ready(function(){
        var $tweetlbox = $('#tweetlbox');

        // add new tweets & set hidden value
        var lastDisplayed = 0;
        var liveFeed = false;
        var displayTweets = function(){
          for (lastDisplayed; lastDisplayed < streams.home.length;) {
            var tweet = streams.home[lastDisplayed];
            var $tweet = $('<div></div>');
            var user = tweet.user
            $tweet.addClass(user);
            if (!liveFeed) {
              $tweet.addClass('hidden');
            }
            $tweet.text(lastDisplayed + '@' + tweet.user + ': ' + tweet.message + tweet.created_at);
            $tweet.prependTo($tweetlbox);
            lastDisplayed+=1;
          }
        }

        // Add new tweets to DOM every 100ms
        var displayNew = function(){
          displayTweets();
          setTimeout(function(){displayNew()}, 100);
        };
        displayNew();

        var showAll = function(){$('div').removeClass('hidden');};

        // See New Button unhides all tweets
        $("#seeAll").on('click', function(){
          showAll();
        })

        // Switch Between Live View & Static View
        $('#liveViewToggle').on('click', function(){
          showAll();
          liveFeed = !liveFeed;
          if (liveFeed) {
            $(this).text("Switch to Static View");
          }
          else
            $(this).text("Switch to Live View");
        })

        

      });

    </script>
  </body>
</html>
