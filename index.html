<!DOCTYPE html>
<html>
  <head>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <LINK REL=StyleSheet HREF="main.css" TYPE="text/css" MEDIA=screen>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

/*        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);
          $tweet.appendTo($body);
          index -= 1;
        }*/
        var lastDisplayed = 0;
        var liveFeed = true;

        var displayTweets = function(){
          for (lastDisplayed; lastDisplayed < streams.home.length;) {
            var tweet = streams.home[lastDisplayed];
            var $tweet = $('<div></div>');
            var user = tweet.user
            $tweet.addClass(user);
            if (!liveFeed) {
              $tweet.addClass('hidden');
            }
            $tweet.text(lastDisplayed + '@' + tweet.user + ': ' + tweet.message + tweet.created_at);
            $tweet.prependTo($body);
            lastDisplayed+=1;
          }
        }

        var displayNew = function(){
          displayTweets();
          setTimeout(function(){displayNew()}, 100);
        };
        displayNew();

      });

    </script>
  </body>
</html>
